<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>PUBHBIO 7230 — Labs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --fg:#1f2937; --muted:#6b7280; --link:#0b57d0; }
    html,body{margin:0;padding:0;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--fg);}
    header{padding:1.25rem 1rem;border-bottom:1px solid #e5e7eb}
    main{padding:1rem;max-width:900px;margin:0 auto}
    h1{font-size:1.25rem;margin:.2rem 0}
    p{color:var(--muted);margin:.2rem 0 .6rem}
    ul{padding-left:1.1rem}
    a{color:var(--link);text-decoration:none}
    a:hover{text-decoration:underline}
    .loading,.error{margin-top:.5rem;font-size:.95rem}
    .error{color:#b91c1c}
    footer{border-top:1px solid #e5e7eb;margin-top:1.25rem;padding:1rem;color:var(--muted);font-size:.9rem}
    .small{font-size:.9rem}
  </style>
</head>
<body>
  <header>
    <h1>PUBHBIO 7230 — Labs</h1>
    <p class="small">Auto‑listing of files in <code>labs/</code></p>
  </header>

  <main>
    <noscript>
      <p class="error">Enable JavaScript to auto‑list the lab files, or add links here manually.</p>
    </noscript>

    <div id="status" class="loading">Loading labs…</div>
    <ul id="lab-list" hidden></ul>
  </main>

  <footer>
    <span id="year"></span> · <a href="https://github.com/fernandalschumacher/PUBHBIO7230">Repository</a>
  </footer>

  <script>
    // ---- Settings: change only if your folder or user/repo differs ----
    const GH_USER = "fernandalschumacher";
    const GH_REPO = "PUBHBIO7230";
    const LABS_FOLDER = "labs"; // folder to list at the site root

    // Utility: convert a repo path to the GitHub Pages URL
    function toPagesURL(repoPath) {
      // GitHub Pages serves from the repo root; folders/files are relative.
      // Example: labs/Lab01.html -> https://<user>.github.io/<repo>/labs/Lab01.html
      return `/${GH_REPO}/${repoPath}`;
    }

    // Render a simple <li><a></a></li>
    function liLink(name, href) {
      const li = document.createElement("li");
      const a = document.createElement("a");
      a.textContent = name;
      a.href = toPagesURL(href);
      a.rel = "noopener";
      li.appendChild(a);
      return li;
    }

    async function loadLabs() {
      const status = document.getElementById("status");
      const list = document.getElementById("lab-list");
      try {
        // GitHub Contents API for a folder
        const api = `https://api.github.com/repos/${GH_USER}/${GH_REPO}/contents/${LABS_FOLDER}`;
        const res = await fetch(api, { headers: { "Accept": "application/vnd.github.v3+json" }});
        if (!res.ok) throw new Error(`GitHub API error (${res.status})`);
        const items = await res.json();

        // Keep only files (ignore subfolders); prefer .html
        const files = items
          .filter(x => x.type === "file")
          .filter(x => /\.(html?|pdf)$/i.test(x.name)) // list .html/.htm and PDFs (adjust as desired)
          .sort((a, b) => a.name.localeCompare(b.name, undefined, { numeric: true, sensitivity: "base" }));

        if (files.length === 0) {
          status.textContent = "No lab files found in the 'labs/' folder yet.";
          return;
        }

        files.forEach(f => {
          // Pages URL is path relative to repo root
          const path = `${LABS_FOLDER}/${f.name}`;
          list.appendChild(liLink(f.name, path));
        });

        status.hidden = true;
        list.hidden = false;
      } catch (err) {
        status.className = "error";
        status.textContent = "Could not load the labs list. If this persists, verify the repo is public and the 'labs/' folder exists.";
        console.error(err);
      }
    }

    document.getElementById("year").textContent = new Date().getFullYear();
    loadLabs();
  </script>
</body>
</html>